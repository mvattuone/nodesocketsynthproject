<script src="/socket.io/socket.io.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script>
	var server = io.connect('http://localhost:8080');
	var insertMessage = function(message) {
		var message = $('<li>' + message + '</li>');
		$('#messages').append(message);
	}
	var insertChatter = function(name) {
		var chatter = $('<li>'+name+'</li>').data('name', name);
		$('#chatters').append(chatter);
	}
	var removeChatter = function(name) {
		$('#chatters li[data-name=' + name + ']').remove();
	}
	$('#chat_form').submit(function(e) {
		var message = $('#chat_input').val();
		socket.emit('messages', message);
	});
	server.on('messages', function(data) {
		insertMessage(data);
	});
	server.on('connect', function(data) {
		$('#status').html('Connected to nodeSynthChat...');
		nickname = prompt("What is your nickname?");

		server.emit('join', nickname);
	});
	server.on('add chatter', insertChatter);
	server.on('remove chatter', removeChatter);
</script>

<h1>nodeSynth Chat</h1>
<h3 id="status"></h3>
<ul id="chatters"></ul>
<ul id ="messages"></ul>
<form id="chat_form"></form>
